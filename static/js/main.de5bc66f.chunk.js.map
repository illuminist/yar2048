{"version":3,"sources":["game/index.ts","store/settings.ts","store/index.ts","theme/makeStyles.ts","pagemodules/Game/styles.ts","pagemodules/Game/Board/styles.ts","pagemodules/Game/Board/Board.tsx","pagemodules/Game/Board/index.ts","hooks/useRefMap2D.ts","pagemodules/Game/Piece/styles.ts","pagemodules/Game/DragControl/DragContext.tsx","pagemodules/Game/Piece/Piece.tsx","pagemodules/Game/Piece/index.ts","pagemodules/Game/DragControl/styles.ts","pagemodules/Game/DragControl/DragControl.tsx","pagemodules/Game/DragControl/index.ts","pagemodules/Game/BottomToolbar/styles.ts","pagemodules/Game/NewGameButton/styles.ts","pagemodules/Game/NewGameButton/NewGameButton.tsx","pagemodules/Game/NewGameButton/index.ts","pagemodules/Game/HelpDialogButton/styles.ts","components/ExternalLink/styles.ts","components/ExternalLink/ExternalLink.tsx","components/ExternalLink/index.ts","pagemodules/Game/HelpDialogButton/HelpDialogButton.tsx","pagemodules/Game/HelpDialogButton/index.ts","svg/GithubLogo/styles.ts","svg/GithubLogo/GithubLogo.tsx","svg/GithubLogo/index.ts","pagemodules/Game/BottomToolbar/BottomToolbar.tsx","pagemodules/Game/BottomToolbar/index.ts","hooks/useResizeObserver.ts","pagemodules/Game/Game.tsx","pagemodules/Game/index.ts","theme/index.ts","components/EntryLoading/styles.ts","components/EntryLoading/EntryLoading.tsx","components/EntryLoading/index.ts","components/NoScript/styles.ts","components/NoScript/NoScript.tsx","components/NoScript/index.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["newGame","createAction","arg","payload","boardSize","startSeed","seed","Date","now","toString","startTime","move","dir","board","options","meta","noGen","addPiece","undefined","piecesReducer","createReducer","builder","addCase","state","d1","d2","_","pullAllBy","removed","grouped","groupBy","position","mapValues","row","sorted","sort","p1","p2","arr","cellPointer","forEach","piece","score","origin","cloneDeep","moved","combine","id","from","rand","console","log","JSON","stringify","omit","seedrandom","occupiedPosition","Set","filter","p","map","allPos","flatMap","times","x","y","delete","availablePos","Array","values","num","Math","min","length","floor","i","posStr","splice","possibleScore","push","Number","MAX_SAFE_INTEGER","parse","determineNextValidMoves","m","pieces","type","some","createSlice","name","initialState","moveHistory","nextValidMoves","moveCount","ended","reducers","extraReducers","action","settings","animation","set","prepare","value","reducer","persistConfig","key","storage","store","configureStore","persistReducer","combineReducers","preloadedState","persistor","persistStore","makeStyles","styles","oriMakeStyles","theme","root","display","flexDirection","boardContainer","alignSelf","maxWidth","width","breakpoints","down","debugCanvas","top","zIndex","dragControl","height","index","cell","paddingBottom","backgroundColor","blueGrey","borderRadius","cellInner","Board","React","props","ref","className","cellRefs","useSelector","classes","useStyles","classNames","col","data-col","data-row","defaultProps","useRefMap2D","get","setWith","current","Object","colorShade","pieceColors","colors","h","s","getColor","log2","color","palette","getContrastText","transition","transitions","create","scoreText","fontSize","left","transform","defaultState","isDragging","direction","drag","dragStart","dragEnd","changeDirection","DragDispatchContext","createContext","DragStateContext","actions","DragContextProvider","children","useReducer","dispatch","Provider","pieceByIdSelector","createSelector","keyBy","defaultPosition","Piece","tableEl","cellRefMap","cv","debugCanvasContext","tableWidth","pieceData","animationEnabled","style","setStyle","fromStyle","setFromStyle","useContext","getStyle","table","cellRect","getBoundingClientRect","tableRect","fromCell","offset","parseInt","centerTo","fromRect","centerFrom","lineCap","beginPath","moveTo","lineTo","stroke","fillText","animatedStyle","useSpring","to","delay","config","mass","tension","friction","Card","elevation","component","animated","div","numeral","format","userSelect","cursor","touchAction","arrowKeyDirMap","ArrowLeft","ArrowUp","ArrowDown","ArrowRight","DragControl","useDispatch","controlDispatch","setDragStart","dragDir","setDragDir","controlFocused","setFocus","nextDir","handleKeyDown","e","preventDefault","handleKeyUp","includes","window","addEventListener","removeEventListener","handleDragMove","lp","touches","dx","clientX","dy","clientY","sqrt","r","atan2","abs","PI","handleDragStart","dragStartControl","handleDragEnd","tabIndex","onFocus","onBlur","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","defaultValue","NewGameButton","open","setOpen","handleClose","handleOpen","Button","variant","onClick","Dialog","onClose","initialValues","onSubmit","a","DialogTitle","DialogContent","FormGroup","required","as","TextField","label","margin","inputProps","max","pattern","helperText","DialogActions","ExternalLink","Component","rest","target","rel","homepageLink","githubRepo","HelpDialogButton","IconButton","DialogContentText","Typography","gutterBottom","Link","href","GithubLogo","SvgIcon","version","baseProfile","viewBox","d","BottomToolbar","settingsData","Toolbar","disableGutters","edge","FormControlLabel","control","Checkbox","checked","onChange","storeMap","WeakMap","useResizeObserver","el","callback","callbackRef","has","ro","ResizeObserver","throttle","entries","observer","ReactDOM","fn","leading","observe","off","unobserve","cbWrap","o","add","size","Game","tableRef","canvasRef","getContext","clearRect","game","setTableWidth","contentRect","matchXs","useMediaQuery","Container","flexDirectionCenter","justifyContent","column","alignItems","sansFonts","serifFonts","background","primary","amber","secondary","red","mixins","flex","flexWrap","imageAvatar","mixBackgroundColor","drawer","main","sidebar","typography","fontFamily","h1","h2","h3","h4","h5","h6","createMuiTheme","translateTo","loadingText","textAlign","marginTop","marginRight","animationTimingFunction","animationDuration","animationDelay","animationIterationCount","piece1","animationName","piece2","piece3","devTools","EntryLoading","content","icon","marginBottom","spacing","forceOpacity","opacity","NoScript","suppressHydrationWarning","disablePortal","container","completedTheme","generateClassName","createGenerateClassName","productionPrefix","disableGlobal","App","StylesProvider","CssBaseline","loading","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","rootEl","document","getElementById","reactNode","StrictMode","hasChildNodes","hydrate","remove","render","URL","process","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.de5bc66f.chunk.js","sourcesContent":["import _ from 'lodash'\nimport { createAction, createReducer, createSlice } from '@reduxjs/toolkit'\nimport seedrandom from 'seedrandom'\n\nexport type MoveSet = 'up' | 'down' | 'left' | 'right'\n\nexport type NumberPair = [number, number]\n\nexport type PieceType = {\n  id: string\n  position: NumberPair\n  score: number\n  removed?: boolean\n  moved?: { combine?: string; from: NumberPair | null }\n}\n\nexport type BoardType = {\n  boardSize: number\n  startTime: number\n  startSeed: any\n  pieces: PieceType[]\n  moveHistory: MoveSet[]\n  moveCount: number\n  nextValidMoves: MoveSet[]\n  ended: boolean\n  endedTime?: number\n}\n\nexport const newGame = createAction(\n  'newGame',\n  (arg: { boardSize?: number; seed?: any }) => {\n    return {\n      payload: {\n        boardSize: arg.boardSize || 4,\n        startSeed: arg.seed || Date.now().toString(36),\n        startTime: Date.now(),\n      },\n    }\n  },\n)\n\nexport const move = createAction(\n  'move',\n  (\n    dir: MoveSet,\n    board?: { boardSize: number },\n    options?: { noGen: boolean },\n  ) => {\n    return {\n      payload: dir,\n      meta: { board, noGen: options?.noGen || false },\n    }\n  },\n)\n\nexport const addPiece = createAction(\n  'addpiece',\n  (\n    board: { boardSize: number } = { boardSize: 4 },\n    options?: { noGen: boolean },\n  ) => {\n    return {\n      payload: undefined,\n      meta: { board, noGen: options?.noGen || false },\n    }\n  },\n)\n\nexport const randomNumberGenerator = (seed: any) => {\n  console.log(JSON.stringify(_.omit(seed, 'startTime')))\n  const rand = seedrandom(JSON.stringify(_.omit(seed, 'startTime')))\n  return rand\n}\n\nexport const piecesReducer = createReducer<PieceType[]>([], (builder) =>\n  builder\n    .addCase(move, (state, { payload, meta }) => {\n      const { boardSize = 4 } = meta?.board || {}\n      const d1 = payload === 'up' || payload === 'down' ? 0 : 1\n      const d2 = d1 === 0 ? 1 : 0\n      const dir = payload === 'up' || payload === 'left' ? 1 : -1\n\n      _.pullAllBy(state, [{ removed: true }], 'removed')\n\n      const grouped = _.groupBy(state, ({ position }) => position[d1])\n      _.mapValues(grouped, (row) => {\n        const sorted = row.sort(\n          ({ position: p1 }, { position: p2 }) => dir * (p1[d2] - p2[d2]),\n        )\n        let arr: PieceType[] = []\n        let cellPointer = dir > 0 ? 0 : boardSize - 1\n        sorted.forEach((piece) => {\n          const { position, score } = piece\n          const origin = _.cloneDeep(position)\n\n          if (\n            dir > 0 ? position[d2] > cellPointer : position[d2] < cellPointer\n          ) {\n            if (arr[cellPointer] && arr[cellPointer].score === score) {\n              arr[cellPointer].score += score\n              piece.removed = true\n              piece.moved = {\n                combine: arr[cellPointer].id,\n                from: origin,\n              }\n              piece.position[d2] = cellPointer\n\n              cellPointer += dir\n            } else if (arr[cellPointer]) {\n              cellPointer += dir\n\n              if (piece.position[d2] !== cellPointer) {\n                piece.position[d2] = cellPointer\n                piece.moved = { from: origin }\n              } else {\n                delete piece.moved\n              }\n\n              arr[cellPointer] = piece\n            } else {\n              piece.position[d2] = cellPointer\n              piece.moved = { from: origin }\n              arr[cellPointer] = piece\n            }\n          } else {\n            piece.position = origin // TODO report for a bug immer proxy leak\n            arr[cellPointer] = piece\n            delete piece.moved\n          }\n        })\n      })\n    })\n    .addCase(addPiece, (state, { meta }) => {\n      const { boardSize } = meta.board\n      const rand = randomNumberGenerator(meta.board)\n      const occupiedPosition = new Set(\n        state.filter((p) => !p.removed).map((p) => JSON.stringify(p.position)),\n      )\n      const allPos = new Set(\n        _.flatMap(\n          _.times(boardSize, (x) =>\n            _.times(boardSize, (y) => JSON.stringify([x, y])),\n          ),\n        ),\n      )\n      occupiedPosition.forEach((p) => allPos.delete(p))\n      const availablePos = Array.from(allPos.values())\n      const num = Math.min(\n        availablePos.length,\n        1 + Math.floor(availablePos.length / 8),\n      )\n      _.times(num, () => {\n        const i = Math.floor(rand() * availablePos.length)\n        const posStr = availablePos.splice(i, 1)\n        const possibleScore = [2, 2, 4]\n        state.push({\n          id: Math.floor(rand() * Number.MAX_SAFE_INTEGER).toString(36),\n          position: JSON.parse(posStr[0]),\n          score: possibleScore[Math.floor(rand() * possibleScore.length)],\n          moved: { from: null },\n        })\n      })\n    }),\n)\n\nconst determineNextValidMoves = (state: BoardType) => {\n  const moveSet: MoveSet[] = ['left', 'right', 'up', 'down']\n  return moveSet.filter((m) => {\n    const nextPieceState = piecesReducer(state.pieces, {\n      type: 'move',\n      payload: m,\n      meta: { board: state },\n    })\n    return nextPieceState.some((p) => p.moved?.from)\n  })\n}\n\nconst defaultBoard: BoardType = {\n  boardSize: 4,\n  startTime: 0,\n  pieces: [],\n  moveHistory: [],\n  nextValidMoves: [],\n  startSeed: null,\n  moveCount: 0,\n  ended: false,\n}\n\nexport const board = createSlice({\n  name: 'board',\n  initialState: defaultBoard,\n  reducers: {},\n  extraReducers: (builder) =>\n    builder\n      .addCase(newGame, (state, { payload }) => {\n        const board: BoardType = {\n          startTime: payload.startTime,\n          boardSize: payload.boardSize,\n          startSeed: payload.startSeed,\n          moveCount: 0,\n          pieces: [],\n          nextValidMoves: [],\n          moveHistory: [],\n          ended: false,\n        }\n        board.pieces = piecesReducer(board.pieces, addPiece(board))\n        board.nextValidMoves = determineNextValidMoves(board)\n        return board\n      })\n      .addCase(move, (state, action) => {\n        // cloneDeep to avoid weird immer behavior https://github.com/immerjs/immer/issues/559\n        state.pieces = piecesReducer(_.cloneDeep(state.pieces), {\n          ...action,\n          meta: { board: state },\n        })\n        const moved = state.pieces.some((p) => p.moved?.from)\n        state.pieces.forEach((p) =>\n          console.log(p.id, p.position, p.moved?.from),\n        )\n        console.log(moved)\n        if (moved && !action.meta.noGen) {\n          state.pieces = piecesReducer(state.pieces, addPiece(state))\n        }\n        if (moved) {\n          state.moveHistory.push(action.payload)\n          state.moveCount++\n        }\n\n        // determine next valid move\n        state.nextValidMoves = determineNextValidMoves(_.cloneDeep(state))\n      }),\n})\n\nexport default board\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\ntype Settings = {\n  animation: boolean\n}\n\nconst defaultSettings: Settings = {\n  animation: true,\n}\n\nexport const settings = createSlice({\n  name: 'settings',\n  initialState: defaultSettings,\n  reducers: {\n    set: {\n      prepare: <S extends keyof Settings>(name: S, value: Settings[S]) => {\n        return { payload: { name, value } }\n      },\n      reducer: <S extends keyof Settings>(\n        state: Settings,\n        { payload }: PayloadAction<{ name: S; value: Settings[S] }>,\n      ) => {\n        state[payload.name] = payload.value\n      },\n    },\n  },\n})\n\nexport default settings\n","import { configureStore, combineReducers } from '@reduxjs/toolkit'\nimport board from '../game'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport settings from './settings'\n\nconst persistConfig = {\n  key: 'game',\n  storage,\n}\n\nexport type StoreState = ReturnType<typeof store.getState>\n\ndeclare module 'react-redux' {\n  interface DefaultRootState extends StoreState {}\n}\n\nexport const store = configureStore({\n  reducer: persistReducer(\n    persistConfig,\n    combineReducers({\n      board: board.reducer,\n      settings: settings.reducer,\n    }),\n  ),\n  preloadedState: {\n    board: {},\n  },\n})\n\nexport const persistor = persistStore(store)\nexport default store\n","import omit from 'lodash/omit'\nimport { Theme } from '@material-ui/core/styles/createMuiTheme'\nimport { makeStyles as oriMakeStyles } from '@material-ui/styles'\n\nimport { Styles, WithStylesOptions } from '@material-ui/styles/withStyles'\n\nexport const makeStyles = <\n  Props extends {} = {},\n  ClassKey extends string = string\n>(\n  styles: Styles<Theme, Props, ClassKey>,\n  options?: WithStylesOptions<Theme>,\n) => {\n  return oriMakeStyles(\n    styles,\n    process.env.NODE_ENV === 'production' ? omit(options, 'name') : options,\n  )\n}\nexport default makeStyles\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    boardContainer: {\n      position: 'relative',\n      alignSelf: 'center',\n      maxWidth: 'calc(100vw - 32px)',\n      width: ({ boardSize }: { boardSize: number }) =>\n        boardSize * (120 - (boardSize - 4) * 10),\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n      },\n    },\n    board: {\n      width: '100%',\n    },\n    debugCanvas: {\n      position: 'absolute',\n      top: 0,\n      zIndex: 15,\n    },\n    dragControl: {\n      position: 'absolute',\n      top: 0,\n      width: '100%',\n      height: '100%',\n    },\n  }),\n  { name: 'Game', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\nimport { blueGrey } from '@material-ui/core/colors'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {},\n    cell: {\n      // width: ({ boardSize }: { boardSize: number }) => `${50 / boardSize}%`,\n      paddingBottom: ({ boardSize }: { boardSize: number }) =>\n        `${100 / boardSize}%`,\n      backgroundColor: blueGrey['A100'],\n      borderRadius: 8,\n    },\n    cellInner: {\n      position: 'absolute',\n      // width: '100%',\n    },\n  }),\n  { name: 'Board', index: 1 },\n)\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport { useSelector } from 'react-redux'\nimport { RefMap2D } from 'hooks/useRefMap2D'\n\nexport interface BoardProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  cellRefs: RefMap2D<HTMLTableCellElement>\n}\n\nexport const Board = React.forwardRef<HTMLTableElement, BoardProps>(\n  (props, ref) => {\n    const { className, cellRefs } = props\n\n    const boardSize = useSelector((state) => state.board.boardSize)\n    const classes = useStyles({ boardSize })\n\n    return (\n      <table ref={ref} className={classNames(className, classes.root)}>\n        <tbody>\n          {_.times(boardSize, (row) => (\n            <tr key={'row-' + row}>\n              {_.times(boardSize, (col) => (\n                <td\n                  key={'col-' + col}\n                  className={classes.cell}\n                  data-col={col}\n                  data-row={row}\n                  ref={cellRefs(col, row)}>\n                  <span className={classes.cellInner}></span>\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  },\n)\n\nBoard.defaultProps = {}\n\nexport default Board\n","import Board from './Board'\n\nexport default Board\n","import * as React from 'react'\nimport get from 'lodash/get'\nimport setWith from 'lodash/setWith'\n\nexport type RefMap2D<T> = (x: number, y: number) => { current: T }\n\nexport function useRefMap2D<T>(): RefMap2D<T> {\n  const ref = React.useRef<{ [x: number]: { [y: number]: { current: T } } }>()\n  return React.useCallback((x: number, y: number) => {\n    if (!get(ref, ['current', x, y])) {\n      setWith(ref, ['current', x, y], { current: null }, Object)\n    }\n    return get(ref, ['current', x, y]) as { current: T }\n  }, [])\n}\n\nexport default useRefMap2D\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\nimport * as colors from '@material-ui/core/colors'\n\nconst colorShade = [300, 500, 700] as const\nconst colorHue = [\n  colors.yellow,\n  colors.orange,\n  colors.red,\n  colors.pink,\n  colors.purple,\n  colors.indigo,\n  colors.blue,\n  colors.cyan,\n  colors.teal,\n  colors.green,\n  colors.lime,\n]\n\nconst pieceColors = colorHue.flatMap((h) =>\n  colorShade.map((s) => {\n    return h[s]\n  }),\n)\n\nconst getColor = (score: number) => {\n  const i = Math.log2(score)\n  return pieceColors[Math.floor(i % pieceColors.length)]\n}\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      position: 'absolute',\n      backgroundColor: ({ score }: { score: number; animation: boolean }) =>\n        getColor(score),\n      color: ({ score }) => theme.palette.getContrastText(getColor(score)),\n      borderRadius: 8,\n      zIndex: 2,\n      transition: ({ animation }) =>\n        animation\n          ? theme.transitions.create(['background-color', 'color'])\n          : 'none',\n    },\n    removed: {\n      // visibility: 'hidden',\n      zIndex: 1,\n    },\n    scoreText: {\n      color: 'inherit',\n      fontSize: ({ score }) => (score < 1000 ? 48 : 36),\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n    },\n  }),\n  { name: 'Piece', index: 1 },\n)\n","import React from 'react'\nimport { MoveSet } from 'game'\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\ntype DragState = {\n  isDragging: boolean\n  direction: MoveSet | null\n}\nconst defaultState: DragState = { isDragging: false, direction: null }\n\nexport const drag = createSlice({\n  name: 'dragcontrol',\n  initialState: defaultState,\n  reducers: {\n    dragStart: (state) => {\n      state.isDragging = true\n    },\n    dragEnd: (state) => {\n      state.isDragging = false\n      state.direction = null\n    },\n    changeDirection: (state, action: PayloadAction<MoveSet | null>) => {\n      state.direction = action.payload\n    },\n  },\n})\n\nexport const DragDispatchContext = React.createContext<React.Dispatch<any>>(\n  () => {},\n)\nexport const DragStateContext = React.createContext<DragState>(defaultState)\nexport const useDragState = () => React.useContext(DragStateContext)\nexport const useDragDispatch = () => React.useContext(DragDispatchContext)\n\nexport const { dragStart, dragEnd, changeDirection } = drag.actions\n\nexport const DragContextProvider: React.FC = ({ children }) => {\n  const [state, dispatch] = React.useReducer(drag.reducer, defaultState)\n\n  return (\n    <DragDispatchContext.Provider value={dispatch}>\n      <DragStateContext.Provider value={state}>\n        {children}\n      </DragStateContext.Provider>\n    </DragDispatchContext.Provider>\n  )\n}\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport numeral from 'numeral'\nimport useStyles from './styles'\nimport Card from '@material-ui/core/Card'\nimport { RefMap2D } from 'hooks/useRefMap2D'\nimport { useSelector } from 'react-redux'\nimport { createSelector } from '@reduxjs/toolkit'\nimport { useSpring, animated } from 'react-spring'\nimport { StoreState } from 'store'\nimport { NumberPair } from 'game'\nimport { useDragState } from '../DragControl/DragContext'\n\nconst pieceByIdSelector = createSelector(\n  (state: StoreState) => state.board.pieces,\n  (pieces) => _.keyBy(pieces, 'id'),\n)\n\nexport interface PieceProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  cellRefMap: RefMap2D<HTMLTableCellElement>\n  tableEl: HTMLTableElement | null\n  debugCanvasContext?: CanvasRenderingContext2D\n  tableWidth?: number\n  id: string\n}\n\nconst defaultPosition = {\n  top: 0,\n  left: 0,\n  width: 0,\n  height: 0,\n}\n\nexport const Piece: React.FC<PieceProps> = (props) => {\n  const {\n    className,\n    id,\n    tableEl,\n    cellRefMap,\n    debugCanvasContext: cv,\n    tableWidth,\n  } = props\n\n  const pieceData = useSelector((state) => pieceByIdSelector(state)[id])\n  const animationEnabled = useSelector((state) => state.settings.animation)\n\n  const classes = useStyles({\n    score: pieceData.score,\n    animation: animationEnabled,\n  })\n\n  const [style, setStyle] = React.useState(defaultPosition)\n  const [fromStyle, setFromStyle] = React.useState(defaultPosition)\n\n  const { isDragging, direction } = useDragState()\n\n  const getStyle = (cell: HTMLTableCellElement) => {\n    const table = tableEl\n    if (cell && table) {\n      const cellRect = cell.getBoundingClientRect()\n      const tableRect = table.getBoundingClientRect()\n\n      return {\n        top: cellRect.top - tableRect.top,\n        left: cellRect.left - tableRect.left,\n        width: cellRect.width,\n        height: cellRect.height,\n      }\n    }\n    return defaultPosition\n  }\n\n  React.useLayoutEffect(() => {\n    const cell = cellRefMap(pieceData.position[0], pieceData.position[1])\n      .current\n    const table = tableEl\n    if (cell && table) {\n      const cellRect = cell.getBoundingClientRect()\n      const tableRect = table.getBoundingClientRect()\n\n      setStyle(getStyle(cell))\n      const from = pieceData.moved?.from\n\n      if (from) {\n        const fromCell = cellRefMap(from[0], from[1])\n        setFromStyle(getStyle(fromCell.current))\n      }\n\n      if (cv) {\n        if (pieceData.moved) {\n          const offset = parseInt(pieceData.id, 36) % 40\n          const centerTo = [\n            cellRect.left - tableRect.left + cellRect.width / 2 + offset,\n            cellRect.top - tableRect.top + cellRect.height / 2 + offset,\n          ] as NumberPair\n          if (from) {\n            const fromCell = cellRefMap(from[0], from[1])\n            const fromRect = fromCell.current.getBoundingClientRect()\n            const centerFrom = [\n              fromRect.left - tableRect.left + fromRect.width / 2 + offset,\n              fromRect.top - tableRect.top + fromRect.height / 2 + offset,\n            ] as NumberPair\n\n            cv.lineCap = 'round'\n            cv.beginPath()\n            cv.moveTo(...centerFrom)\n            cv.lineTo(...centerTo)\n            if (pieceData.removed) {\n              cv.lineTo(centerTo[0] + 20, centerTo[1] + 20)\n            }\n            cv.stroke()\n          } else if (from === null) {\n            cv.fillText('A', ...centerTo)\n          }\n        }\n      }\n    }\n  }, [\n    pieceData.id,\n    pieceData.position,\n    pieceData.moved,\n    pieceData.removed,\n    tableWidth,\n    cv,\n    tableEl,\n  ])\n\n  const animatedStyle = useSpring({\n    from:\n      pieceData.moved?.from === null\n        ? { ...style, width: 0, height: 0 }\n        : fromStyle,\n    to: isDragging\n      ? {\n          ...style,\n          top:\n            style.top -\n            10 +\n            (direction === 'up' ? -20 : direction === 'down' ? 20 : 0),\n          left:\n            style.left +\n            (direction === 'left' ? -20 : direction === 'right' ? 20 : 0),\n        }\n      : style,\n    delay: pieceData.moved?.from === null ? 100 : 0,\n    config: { mass: 1, tension: 300, friction: 26 },\n  })\n\n  return (\n    <Card\n      elevation={0}\n      component={animated.div}\n      className={classNames(className, classes.root, {\n        [classes.removed]: pieceData.removed,\n      })}\n      style={animationEnabled ? animatedStyle : style}>\n      <span className={classes.scoreText}>\n        {pieceData.score > 2048\n          ? numeral(pieceData.score).format('0a')\n          : pieceData.score}\n      </span>\n    </Card>\n  )\n}\n\nPiece.defaultProps = {}\n\nexport default Piece\n","import Piece from './Piece'\n\nexport default Piece\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      userSelect: 'none',\n      zIndex: 20,\n      cursor: 'pointer',\n      touchAction: 'none',\n    },\n  }),\n  { name: 'DragControl', index: 1 },\n)\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { MoveSet, move } from 'game'\nimport {\n  useDragDispatch,\n  dragEnd,\n  dragStart as dragStartControl,\n  changeDirection,\n} from './DragContext'\n\nconst arrowKeyDirMap: { [key: string]: MoveSet } = {\n  ArrowLeft: 'left',\n  ArrowUp: 'up',\n  ArrowDown: 'down',\n  ArrowRight: 'right',\n}\n\nexport interface DragControlProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const DragControl: React.FC<DragControlProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  const dispatch = useDispatch()\n  const controlDispatch = useDragDispatch()\n\n  const [dragStart, setDragStart] = React.useState<{\n    x: number\n    y: number\n  } | null>(null)\n  const [dragDir, setDragDir] = React.useState<MoveSet | null>(null)\n  const [controlFocused, setFocus] = React.useState(false)\n\n  const nextValidMoves = useSelector((state) => state.board.nextValidMoves)\n\n  // Handle keyboard control\n  React.useEffect(() => {\n    // if (!controlFocused) return\n    let nextDir: null | MoveSet = null\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const dir = arrowKeyDirMap[e.key]\n      if (dir) {\n        e.preventDefault()\n        nextDir = dir\n      }\n    }\n    const handleKeyUp = (e: KeyboardEvent) => {\n      const dir = arrowKeyDirMap[e.key]\n      if (dir && nextDir === dir && nextValidMoves.includes(nextDir)) {\n        dispatch(move(dir))\n      } else {\n        nextDir = null\n      }\n    }\n    window.addEventListener('keydown', handleKeyDown)\n    window.addEventListener('keyup', handleKeyUp)\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown)\n      window.removeEventListener('keyup', handleKeyUp)\n    }\n  }, [controlFocused, nextValidMoves])\n\n  // Handle mouse and touch control\n  const handleDragMove = React.useCallback(\n    (e: React.MouseEvent | React.TouchEvent | MouseEvent | TouchEvent) => {\n      if (!dragStart) return\n\n      const lp = 'touches' in e ? e.touches[0] : e\n      const dx = lp.clientX - dragStart.x\n      const dy = lp.clientY - dragStart.y\n      const d = Math.sqrt(dx * dx + dy * dy)\n      if (d > 60) {\n        const r = Math.atan2(dy, dx)\n        const dir: MoveSet =\n          Math.abs(r) < Math.PI * 0.25\n            ? 'right'\n            : Math.abs(r) > Math.PI * 0.75\n            ? 'left'\n            : r < 0\n            ? 'up'\n            : 'down'\n\n        if (nextValidMoves.includes(dir)) {\n          setDragDir(dir)\n          controlDispatch(changeDirection(dir))\n        } else {\n          setDragDir(null)\n          controlDispatch(changeDirection(null))\n        }\n      } else {\n        setDragDir(null)\n        controlDispatch(changeDirection(null))\n      }\n    },\n    [dragStart, nextValidMoves],\n  )\n\n  const handleDragStart = (e: React.MouseEvent | React.TouchEvent) => {\n    if (nextValidMoves.length > 0) {\n      const lp = 'touches' in e ? e.touches[0] : e\n      setDragStart({ x: lp.clientX, y: lp.clientY })\n      controlDispatch(dragStartControl())\n    }\n  }\n\n  const handleDragEnd = React.useCallback(() => {\n    if (dragDir) {\n      dispatch(move(dragDir))\n    }\n\n    controlDispatch(dragEnd())\n    setDragStart(null)\n    setDragDir(null)\n  }, [dragDir])\n\n  React.useEffect(() => {\n    if (dragStart) {\n      window.addEventListener('mousemove', handleDragMove)\n      window.addEventListener('touchmove', handleDragMove)\n      window.addEventListener('mouseup', handleDragEnd)\n      window.addEventListener('touchend', handleDragEnd)\n      return () => {\n        window.removeEventListener('mousemove', handleDragMove)\n        window.removeEventListener('touchmove', handleDragMove)\n        window.removeEventListener('mouseup', handleDragEnd)\n        window.removeEventListener('touchend', handleDragEnd)\n      }\n    }\n  }, [dragStart, handleDragMove, handleDragEnd])\n\n  return (\n    <div\n      tabIndex={0}\n      className={classNames(className, classes.root)}\n      onFocus={() => setFocus(true)}\n      onBlur={() => setFocus(false)}\n      onMouseDown={handleDragStart}\n      onMouseMove={handleDragMove}\n      onMouseUp={handleDragEnd}\n      onTouchStart={handleDragStart}\n      onTouchMove={handleDragMove}\n      onTouchEnd={handleDragEnd}\n    />\n  )\n}\n\nDragControl.defaultProps = {}\n\nexport default DragControl\n","import DragControl from './DragControl'\n\nexport default DragControl\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n  }),\n  { name: 'BottomToolbar', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n  }),\n  { name: 'NewGameButton', index: 1 },\n)\n","import classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport TextField from '@material-ui/core/TextField'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport { Field, Form, Formik } from 'formik'\nimport { useDispatch } from 'react-redux'\nimport { newGame } from 'game'\n\ntype ValueType = {\n  boardSize: number\n  seed: string\n}\n\nconst defaultValue: ValueType = { boardSize: 4, seed: '' }\n\nexport interface NewGameButtonProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const NewGameButton: React.FC<NewGameButtonProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  const [open, setOpen] = React.useState(false)\n  const handleClose = React.useCallback(() => setOpen(false), [])\n  const handleOpen = React.useCallback(() => setOpen(true), [])\n\n  const dispatch = useDispatch()\n  const handleSubmit = (value: ValueType, a: any) => {\n    dispatch(newGame(value))\n    handleClose()\n  }\n\n  return (\n    <>\n      <Button\n        className={classNames(className, classes.root)}\n        color=\"primary\"\n        variant=\"contained\"\n        onClick={handleOpen}>\n        New Game\n      </Button>\n      <Dialog open={open} onClose={handleClose}>\n        <Formik initialValues={defaultValue} onSubmit={handleSubmit}>\n          <Form>\n            <DialogTitle>Create a new game</DialogTitle>\n            <DialogContent>\n              <FormGroup>\n                <Field\n                  required\n                  as={TextField}\n                  name=\"boardSize\"\n                  label=\"Board size\"\n                  type=\"number\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  inputProps={{\n                    min: 4,\n                    max: 10,\n                    pattern: /\\d*/,\n                  }}\n                />\n                <Field\n                  as={TextField}\n                  name=\"seed\"\n                  label=\"Seed\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  helperText=\"Left blank for random seed\"\n                />\n              </FormGroup>\n            </DialogContent>\n            <DialogActions>\n              <Button color=\"primary\" onClick={handleClose}>\n                Close\n              </Button>\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                Create\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nNewGameButton.defaultProps = {}\n\nexport default NewGameButton\n","import NewGameButton from './NewGameButton'\n\nexport default NewGameButton\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n  }),\n  { name: 'HelpDialogButton', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n  }),\n  { name: 'ExternalLink', index: 1 },\n)\n","import classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\n\nexport interface ExternalLinkProps extends React.HTMLProps<HTMLAnchorElement> {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  component?: React.ElementType<React.HTMLProps<HTMLAnchorElement>>\n}\n\nexport const ExternalLink: React.FC<ExternalLinkProps> = (props) => {\n  const classes = useStyles(props)\n  const { className, component: Component = 'a', children, ...rest } = props\n\n  return (\n    <Component\n      className={classNames(className, classes.root)}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      {...rest}>\n      {children}\n    </Component>\n  )\n}\n\nExternalLink.defaultProps = {}\n\nexport default ExternalLink\n","import ExternalLink from './ExternalLink'\n\nexport default ExternalLink\n","import classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport Link from '@material-ui/core/Link'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport IconButton from '@material-ui/core/IconButton'\nimport HelpIcon from '@material-ui/icons/Help'\nimport ExternalLink from 'components/ExternalLink'\n\nexport interface HelpDialogButtonProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nconst homepageLink = 'https://github.com/illuminist'\nconst githubRepo = 'https://github.com/illuminist/yar2048'\n\nexport const HelpDialogButton: React.FC<HelpDialogButtonProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  const [open, setOpen] = React.useState(false)\n  const handleClose = React.useCallback(() => setOpen(false), [])\n  const handleOpen = React.useCallback(() => setOpen(true), [])\n\n  return (\n    <>\n      <IconButton\n        className={classNames(className, classes.root)}\n        onClick={handleOpen}>\n        <HelpIcon />\n      </IconButton>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>Yet Another React 2048</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <Typography variant=\"body2\" gutterBottom>\n              Created by{' '}\n              <ExternalLink component={Link} href={homepageLink}>\n                Witsarut Sawetkanit\n              </ExternalLink>\n              . Based on{' '}\n              <ExternalLink\n                component={Link}\n                href=\"https://itunes.apple.com/us/app/1024!/id823499224\">\n                1024 by Veewo Studio\n              </ExternalLink>{' '}\n              and conceptually similar to{' '}\n              <ExternalLink component={Link} href=\"http://asherv.com/threes/\">\n                Threes by Asher Vollmer\n              </ExternalLink>\n              .\n              <br />\n              <br />\n              <ExternalLink component={Link} href={githubRepo}>\n                Github repository\n              </ExternalLink>\n            </Typography>\n            <Typography variant=\"h5\" gutterBottom>\n              Rules and how to play\n            </Typography>\n            <Typography variant=\"body1\" gutterBottom>\n              Use keyboard's arrow keys, mouse click and drag, or touch drag to\n              slide tile pieces in 4 directions: up, down, left, and right. Each\n              tile piece has score on it, sliding them into another tile piece\n              with same score will combine both tile piece together.\n              <br />\n              <br />\n              Try to reach a piece with 2048 score and so on!\n            </Typography>\n            <Typography variant=\"h5\" gutterBottom>\n              Privacy policy\n            </Typography>\n            <Typography variant=\"body2\" gutterBottom>\n              No personal infomation is collected and send to the server. No\n              cookie use. Only infomation is your game saved data that will be\n              stored on your web browser's local storage and never sent to any\n              third-party or us. This piece of data allow you to continue your\n              game from where you left off.\n              <br />\n              <br />\n              This policy is subjected to be changed in future.\n            </Typography>\n            <Typography variant=\"h5\" gutterBottom>\n              MIT License\n            </Typography>\n            <Typography variant=\"body2\" gutterBottom>\n              Copyright 2020 © Witsarut Sawetkanit (\n              <ExternalLink component={Link} href={homepageLink}>\n                {homepageLink}\n              </ExternalLink>\n              )\n              <br />\n              <br />\n              Permission is hereby granted, free of charge, to any person\n              obtaining a copy of this software and associated documentation\n              files (the \"Software\"), to deal in the Software without\n              restriction, including without limitation the rights to use, copy,\n              modify, merge, publish, distribute, sublicense, and/or sell copies\n              of the Software, and to permit persons to whom the Software is\n              furnished to do so, subject to the following conditions:\n              <ul>\n                <li>\n                  The above copyright notice and this permission notice shall be\n                  included in all copies or substantial portions of the\n                  Software.\n                </li>\n              </ul>\n              THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n              EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n              MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n              NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n              HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n              WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n              OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n              DEALINGS IN THE SOFTWARE.\n            </Typography>\n            <Typography variant=\"h6\" gutterBottom>\n              Addition notes\n            </Typography>\n            <Typography variant=\"body2\" gutterBottom>\n              I wrote the policy myself, without any back about law and\n              management knowledge, and my primary language isn't English. If\n              you find any improvement and willing to help me to improve policy\n              document, feel free to open an issue or pull request on{' '}\n              <ExternalLink component={Link} href={githubRepo}>\n                github repository page\n              </ExternalLink>\n              .\n            </Typography>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nHelpDialogButton.defaultProps = {}\n\nexport default HelpDialogButton\n","import HelpDialogButton from './HelpDialogButton'\n\nexport default HelpDialogButton\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n  }),\n  { name: 'GithubLogo', index: 1 },\n)\n","import classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport interface GithubLogoProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const GithubLogo: React.FC<GithubLogoProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  return (\n    <SvgIcon\n      className={classNames(className, classes.root)}\n      version=\"1.2\"\n      baseProfile=\"tiny\"\n      id=\"Layer_1\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 2350 2314.8\">\n      <path\n        d=\"M1175,0C525.8,0,0,525.8,0,1175c0,552.2,378.9,1010.5,890.1,1139.7c-5.9-14.7-8.8-35.3-8.8-55.8v-199.8H734.4\n\tc-79.3,0-152.8-35.2-185.1-99.9c-38.2-70.5-44.1-179.2-141-246.8c-29.4-23.5-5.9-47,26.4-44.1c61.7,17.6,111.6,58.8,158.6,120.4\n\tc47,61.7,67.6,76.4,155.7,76.4c41.1,0,105.7-2.9,164.5-11.8c32.3-82.3,88.1-155.7,155.7-190.9c-393.6-47-581.6-240.9-581.6-505.3\n\tc0-114.6,49.9-223.3,132.2-317.3c-26.4-91.1-61.7-279.1,11.8-352.5c176.3,0,282,114.6,308.4,143.9c88.1-29.4,185.1-47,284.9-47\n\tc102.8,0,196.8,17.6,284.9,47c26.4-29.4,132.2-143.9,308.4-143.9c70.5,70.5,38.2,261.4,8.8,352.5c82.3,91.1,129.3,202.7,129.3,317.3\n\tc0,264.4-185.1,458.3-575.7,499.4c108.7,55.8,185.1,214.4,185.1,331.9V2256c0,8.8-2.9,17.6-2.9,26.4\n\tC2021,2123.8,2350,1689.1,2350,1175C2350,525.8,1824.2,0,1175,0L1175,0z\"\n      />\n    </SvgIcon>\n  )\n}\n\nGithubLogo.defaultProps = {}\n\nexport default GithubLogo\n","import GithubLogo from './GithubLogo'\n\nexport default GithubLogo\n","import classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport NewGameButton from '../NewGameButton'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport { useDispatch, useSelector } from 'react-redux'\nimport settings from 'store/settings'\nimport HelpDialogButton from '../HelpDialogButton'\nimport GithubLogo from 'svg/GithubLogo'\nimport ExternalLink from 'components/ExternalLink'\n\nexport interface BottomToolbarProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const BottomToolbar: React.FC<BottomToolbarProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  const dispatch = useDispatch()\n  const settingsData = useSelector((state) => state.settings)\n\n  return (\n    <Toolbar className={classNames(className, classes.root)} disableGutters>\n      <NewGameButton />\n      <HelpDialogButton />\n      <IconButton component={ExternalLink} edge=\"start\" href=\"#\">\n        <GithubLogo />\n      </IconButton>\n      <FormControlLabel\n        label=\"Animation\"\n        control={\n          <Checkbox\n            checked={settingsData.animation}\n            onChange={(e) =>\n              dispatch(settings.actions.set('animation', e.target.checked))\n            }\n          />\n        }\n      />\n    </Toolbar>\n  )\n}\n\nBottomToolbar.defaultProps = {}\n\nexport default BottomToolbar\n","import BottomToolbar from './BottomToolbar'\n\nexport default BottomToolbar\n","import throttle from 'lodash/throttle'\nimport * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport ResizeObserver from 'resize-observer-polyfill'\n\ntype Callback = (element: ResizeObserverEntry, observer: ResizeObserver) => void\nconst storeMap = new WeakMap<\n  HTMLElement,\n  { off: () => void; callback: Set<Callback> }\n>()\n\nconst useResizeObserver = <E extends HTMLElement>(\n  el: E | null | undefined,\n  callback: Callback,\n) => {\n  const callbackRef = React.useRef(callback)\n  callbackRef.current = callback\n  React.useEffect(() => {\n    if (el) {\n      if (!storeMap.has(el)) {\n        const ro = new ResizeObserver(\n          throttle(\n            (entries, observer) => {\n              const store = storeMap.get(el)\n              if (store) {\n                ReactDOM.unstable_batchedUpdates(() => {\n                  entries.forEach(e =>\n                    store.callback.forEach(fn => fn(e, observer)),\n                  )\n                })\n              }\n            },\n            100,\n            { leading: false },\n          ),\n        )\n        ro.observe(el)\n        storeMap.set(el, {\n          callback: new Set(),\n          off: () => {\n            ro.unobserve(el)\n          },\n        })\n      }\n\n      const store = storeMap.get(el)!\n      const cbWrap: Callback = (e, o) => {\n        callbackRef.current(e, o)\n      }\n      store.callback.add(cbWrap)\n\n      return () => {\n        const store = storeMap.get(el)!\n        store.callback.delete(cbWrap)\n        if (!store.callback.size) {\n          store.off()\n          storeMap.delete(el)\n        }\n      }\n    }\n  }, [el])\n}\n\nexport default useResizeObserver\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Board from './Board'\nimport useRefMap2D from 'hooks/useRefMap2D'\nimport { useSelector, useDispatch } from 'react-redux'\nimport Piece from './Piece'\nimport * as game from 'game'\nimport DragControl from './DragControl'\nimport { DragContextProvider } from './DragControl/DragContext'\nimport Container from '@material-ui/core/Container'\nimport Typography from '@material-ui/core/Typography'\nimport BottomToolbar from './BottomToolbar'\nimport useResizeObserver from 'hooks/useResizeObserver'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport { Theme } from '@material-ui/core'\n\nexport interface GameProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const Game: React.FC<GameProps> = (props) => {\n  const { className } = props\n\n  const tableRef = React.useRef<HTMLTableElement | null>(null)\n  const cellRefMap = useRefMap2D<HTMLTableCellElement>()\n  const pieces = useSelector((state) => state.board.pieces)\n  const { boardSize } = useSelector((state) => state.board)\n  const classes = useStyles({ boardSize })\n\n  const debugDraw = false\n\n  const dispatch = useDispatch()\n\n  const canvasRef = React.useRef<HTMLCanvasElement>(null)\n  canvasRef.current\n    ?.getContext('2d')\n    ?.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height)\n\n  React.useLayoutEffect(() => {\n    if (!pieces) {\n      dispatch(game.newGame({ boardSize: 4 }))\n    }\n  }, [pieces])\n\n  const [tableWidth, setTableWidth] = React.useState(0)\n  useResizeObserver(tableRef.current, (e) => {\n    console.log(e.contentRect.width)\n    setTableWidth(e.contentRect.width)\n  })\n\n  React.useLayoutEffect(() => {\n    const table = tableRef.current\n    if (table) {\n      setTableWidth(table.getBoundingClientRect().width)\n    }\n  }, [tableRef.current])\n\n  const matchXs = useMediaQuery((theme: Theme) => theme.breakpoints.down('xs'))\n\n  if (!pieces) return null\n\n  return (\n    <DragContextProvider>\n      <Container className={classNames(className, classes.root)} maxWidth=\"md\">\n        <Typography variant={matchXs ? 'h2' : 'h1'}>YAR2048</Typography>\n        <Typography variant=\"caption\" gutterBottom>\n          Yet Another React 2048\n        </Typography>\n        <div className={classes.boardContainer}>\n          <Board\n            className={classes.board}\n            ref={tableRef}\n            cellRefs={cellRefMap}\n          />\n          {pieces.map(({ id }) => (\n            <Piece\n              id={id}\n              cellRefMap={cellRefMap}\n              tableEl={tableRef.current}\n              tableWidth={tableWidth}\n              debugCanvasContext={\n                canvasRef.current?.getContext('2d') || undefined\n              }\n              key={id}\n            />\n          ))}\n          {debugDraw && (\n            <canvas\n              className={classes.debugCanvas}\n              ref={canvasRef}\n              {..._.pick(\n                tableRef.current?.getBoundingClientRect(),\n                'height',\n                'width',\n              )}\n            />\n          )}\n          <DragControl className={classes.dragControl} />\n        </div>\n        <BottomToolbar />\n      </Container>\n    </DragContextProvider>\n  )\n}\n\nGame.defaultProps = {}\n\nexport default Game\n","import Game from './Game'\n\nexport default Game\n","import createMuiTheme, {\n  ThemeOptions,\n  Theme,\n} from '@material-ui/core/styles/createMuiTheme'\nimport { Mixins, MixinsOptions } from '@material-ui/core/styles/createMixins'\nimport { CSSProperties } from '@material-ui/styles/withStyles'\nimport * as CSS from 'csstype'\nimport { Overrides } from '@material-ui/core/styles/overrides'\n\nimport { amber, red } from '@material-ui/core/colors'\n\nconst flexDirectionCenter = {\n  row: { justifyContent: 'center' },\n  column: { alignItems: 'center' },\n}\n\nexport const sansFonts =\n  'Kanit, Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\nexport const serifFonts =\n  'Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\n\nexport const noiseImage = '' //createNoiseImage({ color: grey[500] })\n\nexport const overrides = (theme: Theme): Overrides => ({\n  MuiListItem: {\n    root: {\n      borderLeftStyle: 'solid',\n      borderLeftColor: theme.palette.primary.main,\n      borderLeftWidth: 0,\n    },\n  },\n  MuiFormControl: {\n    root: {\n      '&.border': {\n        borderColor: 'rgba(0,0,0,0.3)',\n        borderStyle: 'solid',\n        borderWidth: 1,\n        borderRadius: theme.shape.borderRadius,\n      },\n    },\n  },\n  MuiListItemText: {\n    root: {\n      '&.compact': {\n        display: 'none',\n      },\n    },\n  },\n  MuiExpansionPanelSummary: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiFormLabel: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiCssBaseline: {\n    '@global': {\n      body: {\n        backgroundColor: theme.palette.background.default,\n        backgroundImage: `url(\"${noiseImage}\")`,\n        backgroundBlendMode: 'soft-light',\n      },\n      '@font-face': {\n        fontFamily: 'prompt',\n        unicodeRange: 'U+0E00-0E7F ',\n      },\n    },\n  },\n})\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    drawer: CSSProperties\n    main: CSSProperties\n    sidebar: CSSProperties\n  }\n  interface ThemeOptions extends Partial<Theme> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createTypography' {\n  interface Typography {\n    sansFonts: string\n    serifFonts: string\n  }\n  interface TypographyOptions extends Partial<Mixins> {}\n}\n\nexport const theme = {\n  palette: {\n    background: {\n      // default: grey[400],\n    },\n    type: 'dark',\n    primary: amber,\n    secondary: red,\n  },\n  mixins: {\n    flex: (direction: 'column' | 'row' = 'column', ...options) => ({\n      display: 'flex',\n      flexDirection: direction,\n      ...(options.includes('center') ? flexDirectionCenter[direction] : {}),\n      ...(options.includes('wrap') ? { flexWrap: 'wrap' } : {}),\n    }),\n    imageAvatar: () => ({\n      borderRadius: '12%',\n    }),\n    mixBackgroundColor: (theme, color) => ({\n      backgroundColor: color,\n      color: theme.palette.getContrastText(color),\n    }),\n  } as MixinsOptions,\n  drawer: {\n    width: 240,\n  },\n  main: {\n    width: 720,\n  },\n  sidebar: {\n    width: 300,\n    flex: '0 0 300px',\n  },\n  typography: {\n    fontSize: 14,\n    fontFamily: serifFonts,\n    sansFonts,\n    serifFonts,\n    // Tell Material-UI what the font-size on the html element is.\n    // htmlFontSize: 10,\n    h1: {\n      fontFamily: sansFonts,\n    },\n    h2: {\n      fontFamily: sansFonts,\n    },\n    h3: {\n      fontFamily: sansFonts,\n    },\n    h4: {\n      fontFamily: sansFonts,\n    },\n    h5: {\n      fontFamily: sansFonts,\n    },\n    h6: {\n      fontFamily: sansFonts,\n    },\n    // id: {\n    //   fontFamily: 'monospace',\n    //   fontSize: '0.7rem',\n    //   color: 'rgba(0,0,0,0.2)',\n    // },\n  },\n} as ThemeOptions\n\nexport default createMuiTheme(theme)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nconst translateTo = (x: number, y: number) => {\n  return `translate(${x * 50}px, ${y * 54}px)`\n}\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      display: 'flex',\n      position: 'absolute',\n      height: '100vh',\n      width: '100vw',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column',\n    },\n    boardContainer: {\n      position: 'relative',\n    },\n    loadingText: {\n      textAlign: 'center',\n    },\n    board: {\n      width: 200,\n    },\n    piece: {\n      width: '48px !important',\n      height: '48px !important',\n      marginTop: 2,\n      marginRight: 2,\n      animationTimingFunction: 'ease',\n      animationDuration: '3s',\n      animationDelay: '0.2s',\n      animationIterationCount: 'infinite',\n      // animationDirection: 'alternate',\n    },\n    piece1: {\n      animationName: '$pieceAnim1',\n    },\n    piece2: {\n      animationName: '$pieceAnim2',\n    },\n    piece3: {\n      animationName: '$pieceAnim3',\n    },\n    '@keyframes pieceAnim1': {\n      '0%': { transform: translateTo(0, 0) },\n      '25%': { transform: translateTo(2, 0) },\n      '50%': { transform: translateTo(2, 2) },\n      '75%': { transform: translateTo(0, 2) },\n    },\n    '@keyframes pieceAnim2': {\n      '0%': { transform: translateTo(1, 1) },\n      '25%': { transform: translateTo(2, 1) },\n      '50%': { transform: translateTo(2, 3) },\n      '75%': { transform: translateTo(1, 3) },\n      '100%': { transform: translateTo(1, 1) },\n    },\n    '@keyframes pieceAnim3': {\n      '0%': { transform: translateTo(2, 0) },\n      '25%': { transform: translateTo(3, 0) },\n      '50%': { transform: translateTo(3, 3) },\n      '75%': { transform: translateTo(2, 3) },\n      '100%': { transform: translateTo(2, 0) },\n    },\n  }),\n  { name: 'EntryLoading', index: 1 },\n)\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Board from 'pagemodules/Game/Board'\nimport useRefMap2D from 'hooks/useRefMap2D'\nimport Typography from '@material-ui/core/Typography'\nimport { configureStore, combineReducers } from '@reduxjs/toolkit'\nimport board, { PieceType } from 'game'\nimport { Provider } from 'react-redux'\nimport Piece from 'pagemodules/Game/Piece'\nimport settings from 'store/settings'\n\nconst pieces: PieceType[] = [\n  { id: '1', position: [0, 0], score: 2 },\n  { id: '2', position: [0, 0], score: 4 },\n  { id: '3', position: [0, 0], score: 8 },\n]\nconst store = configureStore({\n  reducer: combineReducers({\n    board: board.reducer,\n    settings: settings.reducer,\n  }),\n  preloadedState: {\n    board: {\n      boardSize: 4,\n      pieces,\n    },\n    settings: { animation: false },\n  },\n  devTools: false,\n})\n\nexport interface EntryLoadingProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const EntryLoading: React.FC<EntryLoadingProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n\n  const tableRef = React.useRef<HTMLTableElement | null>(null)\n  const cellRefMap = useRefMap2D<HTMLTableCellElement>()\n\n  console.log(tableRef)\n\n  return (\n    <Provider store={store}>\n      <div className={classes.root}>\n        <div className={classes.boardContainer}>\n          <Board\n            ref={tableRef}\n            cellRefs={cellRefMap}\n            className={classes.board}\n          />\n          {pieces.map(({ id }) => (\n            <Piece\n              className={classNames(\n                classes.piece,\n                classes[('piece' + id) as keyof typeof classes],\n              )}\n              tableEl={tableRef.current}\n              key={id}\n              id={id}\n              cellRefMap={cellRefMap}\n            />\n          ))}\n        </div>\n        <Typography className={classes.loadingText} variant=\"h6\">\n          Now Loading...\n        </Typography>\n      </div>\n    </Provider>\n  )\n}\n\nEntryLoading.defaultProps = {}\n\nexport default EntryLoading\n","import EntryLoading from './EntryLoading'\n\nexport default EntryLoading\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      position: 'fixed',\n    },\n    content: {\n      display: 'flex',\n      flexDirection: 'column',\n      // padding: theme.spacing(3),\n    },\n    icon: {\n      alignSelf: 'center',\n      width: 80,\n      height: 80,\n      marginBottom: theme.spacing(1),\n    },\n    forceOpacity: {\n      opacity: '1 !important',\n    },\n  }),\n  { name: 'NoScript', index: 1 },\n)\n","import _ from 'lodash'\nimport classNames from 'classnames'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Link from '@material-ui/core/Link'\nimport InfoIcon from '@material-ui/icons/Info'\n\nexport interface NoScriptProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n}\n\nexport const NoScript: React.FC<NoScriptProps> = (props) => {\n  const classes = useStyles(props)\n  const { className } = props\n  const Component = 'noscript'\n\n  return (\n    <Component\n      suppressHydrationWarning\n      className={classNames(className, classes.root)}>\n      <Dialog open disablePortal classes={{ container: classes.forceOpacity }}>\n        <DialogTitle>Javascript is disabled</DialogTitle>\n        <DialogContent className={classes.content}>\n          <InfoIcon className={classes.icon} />\n          <DialogContentText>\n            You need to enable JavaScript to run this app. Here are the{' '}\n            <Link\n              href=\"https://www.enable-javascript.com/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\">\n              instructions how to enable JavaScript in your web browser\n            </Link>\n            .\n          </DialogContentText>\n        </DialogContent>\n      </Dialog>\n    </Component>\n  )\n}\n\nNoScript.defaultProps = {}\n\nexport default NoScript\n","import NoScript from './NoScript'\n\nexport default NoScript\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport store, { persistor } from './store'\nimport Game from 'pagemodules/Game'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport {\n  StylesProvider,\n  MuiThemeProvider,\n  createMuiTheme,\n  createGenerateClassName,\n} from '@material-ui/core/styles'\nimport { theme } from 'theme'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport EntryLoading from 'components/EntryLoading'\nimport NoScript from 'components/NoScript'\n\nconst completedTheme = createMuiTheme(theme)\nconst generateClassName = createGenerateClassName({\n  productionPrefix: 'yar',\n  disableGlobal: true,\n})\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <StylesProvider generateClassName={generateClassName}>\n        <MuiThemeProvider theme={completedTheme}>\n          <CssBaseline>\n            <NoScript />\n            {/* <EntryLoading /> */}\n            <PersistGate loading={<EntryLoading />} persistor={persistor}>\n              <Game />\n            </PersistGate>\n          </CssBaseline>\n        </MuiThemeProvider>\n      </StylesProvider>\n    </Provider>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\n// require('./prerender')\n\nconst rootEl = document.getElementById('root')\nconst reactNode = (\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n)\nif (rootEl?.hasChildNodes) {\n  ReactDOM.hydrate(reactNode, rootEl)\n  document.getElementById('jss-server-side')?.remove()\n} else {\n  ReactDOM.render(reactNode, rootEl)\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n// serviceWorker.unregister()\n"],"sourceRoot":""}